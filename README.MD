# 代码沙箱

### Java原生代码沙箱和Docker代码沙箱这两种实现方式的核心业务流程是相同的，都需要经历以下几个步骤：

1. 把用户的代码保存为文件
2. 编译代码，得到class文件
3. 执行Java代码
4. 收集整理输出结果
5. 文件清理，释放空间
6. 错误处理，提升程序健壮性

区别在于：Java原生代码沙箱是通过Runtime.exec执行命令行操作来执行代码，并通过Process对象的流来获取输出结果，不够安全；Docker代码沙箱是通过创建隔离的Java容器并且通过exec命令在容器内执行Java代码和获取输出，更加安全。
